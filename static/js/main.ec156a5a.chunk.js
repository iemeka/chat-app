(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{22:function(e,t,s){},38:function(e,t,s){},47:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){},89:function(e,t,s){},90:function(e,t,s){},91:function(e,t,s){},92:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),r=s(9),a=s.n(r),i=(s(47),s(22),s(21)),u=s(2),o=s(39),l=Object(o.io)("https://chatxapp.onrender.com/"),j=s.p+"static/media/sound.9287f5ce.mp3",d=s.p+"static/media/altImg.8d7f1054.jpg",b=s(0),m=c.a.createContext({connected:!1,setConnected:function(){},messages:[],setMessages:function(){},users:[],setUsers:function(){},sendMessage:function(){},userInit:function(){},userName:null,setUserName:function(){},userData:{},setUserData:function(){},typingStatus:!1,setTypingStatus:function(){}});function O(e){var t=e.children,s=Object(n.useState)(!1),c=Object(u.a)(s,2),r=c[0],a=c[1],o=Object(n.useState)([]),O=Object(u.a)(o,2),f=O[0],g=O[1],x=Object(n.useState)([]),h=Object(u.a)(x,2),p=h[0],v=h[1],N=Object(n.useState)(null),y=Object(u.a)(N,2),C=y[0],S=y[1],k=Object(n.useState)({}),U=Object(u.a)(k,2),I=U[0],R=U[1],w=Object(n.useState)(!1),D=Object(u.a)(w,2),E=D[0],T=D[1],M=Object(n.useCallback)((function(e){g([].concat(Object(i.a)(f),[{user:"me",type:"chat-message",message:e,imgUrl:I.imgUrl}])),l.emit("send-message",{user:C,message:e,type:"chat-message",imgUrl:d})}),[f,I.imgUrl,C]),A=Object(n.useCallback)((function(e,t){var s=""!==d?d:t;S(e),R({name:e,imgUrl:t,id:l.id}),l.emit("user-init",{user:e,imgUrl:s,message:" is online",type:"online"})}),[]),F=Object(n.useCallback)((function(e){var t=e?"".concat(C," is Typing..."):"";l.emit("typing-user",{message:t,type:"typing"})}),[C]),J=Object(n.useCallback)((function(e,t){g([].concat(Object(i.a)(e),[t]))}),[]);Object(n.useEffect)((function(){return l.on("connect",(function(){a(!0)})),l.on("user-init",(function(e){J(f,e)})),l.on("user-exit",(function(e){e.message=" is offline",e.type="user-exit",J(f,e)})),l.on("send-message",(function(e){new Audio(j).play(),J(f,e)})),l.on("online-users",(function(e){v(e)})),l.on("typing-user",(function(e){T(e)})),function(){l.off("connect"),l.off("user-init"),l.off("send-message"),l.off("user-exit"),l.off("online-users"),l.off("typing-user")}}),[f,J]);var z=Object(n.useMemo)((function(){return{connected:r,messages:f,users:p,sendMessage:M,userName:C,setUserName:S,userInit:A,typingStatus:E,setTypingStatus:T,isTyping:F,userData:I}}),[r,f,p,M,C,A,E,F,I]);return Object(b.jsx)(m.Provider,{value:z,children:t})}s(80);var f=function(){var e=Object(n.useContext)(m).userInit,t=Object(n.useState)(""),s=Object(u.a)(t,2),c=s[0],r=s[1],a=Object(n.useState)(d),i=Object(u.a)(a,2),o=i[0],l=i[1];return Object(b.jsxs)("form",{className:"login-form",onSubmit:function(t){t.preventDefault(),c.trim().length>0&&e(c.trim(),o)},children:[Object(b.jsxs)("div",{className:"image-uploader",children:[Object(b.jsx)("div",{className:"image",style:{backgroundImage:'url("'.concat(o,'")')}}),Object(b.jsxs)("div",{className:"choose-file",children:[Object(b.jsx)("input",{id:"img",type:"file",onChange:function(e){var t=e.target.files[0];if(null!=t){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){l(s.result)}}}}),Object(b.jsx)("label",{className:"file-upload",for:"img",children:"upload image"})]})]}),Object(b.jsx)("input",{placeholder:"Choose a username",type:"text",onChange:function(e){r(e.target.value)}}),Object(b.jsx)("button",{children:"submit"})]})};s(81);function g(){var e=Object(n.useContext)(m).userData;return Object(b.jsxs)("div",{className:"cur-user-sect",children:[Object(b.jsx)("div",{className:"image",style:{backgroundImage:'url("'.concat(e.imgUrl,'")')}}),Object(b.jsx)("div",{className:"cur-user-name",children:Object(b.jsx)("span",{children:e.name})})]})}s(82);function x(){var e=Object(n.useContext)(m),t=e.users,s=e.userData.id;return Object(b.jsx)("div",{className:"hold-other-users",children:Object.keys(t).map((function(e,n){return e!==s?Object(b.jsxs)("div",{className:"other-user",children:[Object(b.jsx)("img",{style:{width:"40px",height:"40px",borderRadius:"50%"},src:t[e].imgUrl,alt:""}),Object(b.jsx)("span",{children:t[e].name})]},n):null}))})}s(83);function h(){var e=Object(n.useContext)(m).users;return Object(b.jsxs)("div",{className:"user-container",children:[Object(b.jsx)("div",{className:"current-user",children:Object(b.jsx)(g,{})}),Object(b.jsx)("div",{className:"users-num",children:Object(b.jsxs)("span",{children:["Active users ",Object(b.jsx)("span",{id:"counter",children:Object.keys(e).length})]})}),Object(b.jsx)("div",{className:"other-users",children:Object(b.jsx)(x,{})})]})}s(84),s(85);var p=s(94);s(86),s(38);function v(e){Object(n.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth"})}))}function N(e){return{me:{backgroundColor:"#1c2439",color:"#fff",order:1},notme:{backgroundColor:"#fff",color:"#1c2439",order:null}}["me"===e?"me":"notme"]}function y(e){var t=e.user,s=e.message,c=e.imgUrl,r=Object(n.useState)(!1),a=Object(u.a)(r,2),i=a[0],o=a[1],l=Object(n.useRef)(null),j=N(t);return v(l),Object(n.useEffect)((function(){o(!0)}),[]),Object(b.jsx)(p.a,{nodeRef:l,in:i,timeout:500,unmountOnExit:!0,classNames:"last",children:Object(b.jsxs)("div",{ref:l,className:"old-msg",children:[Object(b.jsxs)("div",{className:"user",style:{order:j.order},children:[" ",Object(b.jsx)("img",{style:{width:"20px",height:"20px",borderRadius:"50%"},src:c,alt:""}),Object(b.jsx)("span",{children:t})," "]}),Object(b.jsx)("div",{className:"msg",children:Object(b.jsx)("span",{style:{backgroundColor:j.backgroundColor,color:j.color},className:"message",children:s})})]})})}function C(e){var t=e.user,s=e.message,n=e.imgUrl,c=N(t);return Object(b.jsxs)("div",{className:"old-msg",children:[Object(b.jsxs)("div",{className:"user",style:{order:c.order},children:[" ",Object(b.jsx)("img",{style:{width:"20px",height:"20px",borderRadius:"50%"},src:n,alt:""}),Object(b.jsx)("span",{children:t})," "]}),Object(b.jsx)("div",{className:"msg",children:Object(b.jsx)("span",{style:{backgroundColor:c.backgroundColor,color:c.color},className:"message",children:s})})]})}function S(e){var t=e.msg,s=e.ind,c=e.lastInd,r=t.user,a=t.message,i=t.imgUrl,u=Object(n.useRef)(null);return u.current="me"===r?"flex-end":"flex-start",Object(b.jsx)("div",{style:{alignSelf:u.current},children:s+1===c?Object(b.jsx)(y,{user:r,message:a,imgUrl:i}):Object(b.jsx)(C,{user:r,message:a,imgUrl:i})})}s(89);function k(e){var t=e.msg,s=t.user,c=t.message,r=Object(n.useRef)(null);return v(r),Object(b.jsxs)("div",{ref:r,className:"notification",children:[Object(b.jsx)("span",{children:s}),Object(b.jsx)("span",{children:c})]})}function U(){var e=Object(n.useContext)(m).messages;return Object(b.jsx)("div",{className:"display-message",children:e.map((function(t,s){return Object(b.jsx)("div",{className:"msg-container",children:"chat-message"!==t.type?Object(b.jsx)(k,{msg:t}):Object(b.jsx)(S,{msg:t,ind:s,lastInd:e.length})},s)}))})}s(90);var I=s(40),R=s.n(I),w=s(41);function D(){var e=Object(n.useContext)(m),t=e.sendMessage,s=e.isTyping,c=e.typingStatus,r=Object(n.useState)(""),a=Object(u.a)(r,2),i=a[0],o=a[1],l=Object(n.useRef)(null),j=function(){s(!1)},d=Object(n.useRef)();return d.current=c,Object(b.jsx)("div",{className:"type-message",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(i),o(""),l.current.focus()},children:[Object(b.jsx)("div",{className:"hold-indicator",children:Object(b.jsx)("span",{className:"typing-indicator",children:d.current.message})}),Object(b.jsx)("div",{className:"hold-input-box",children:Object(b.jsxs)("div",{className:"input-background",children:[Object(b.jsx)("input",{placeholder:"Enter your message here",className:"input-box",type:"text",value:i,onChange:function(e){o(e.target.value),clearTimeout(j),s(!0)},onKeyUp:function(){setTimeout(j,2e3)},ref:l,autoFocus:!0}),Object(b.jsxs)("button",{id:"submit-btn",children:["Send"," ",Object(b.jsx)(R.a,{className:"sendIcon",path:w.a,title:"Send",size:.6,color:"white"})]})]})})]})})}function E(){return Object(b.jsxs)("div",{className:"chat-box",children:[Object(b.jsx)(U,{}),Object(b.jsx)(D,{})]})}s(91);function T(){return Object(b.jsxs)("div",{className:"app-container",children:[Object(b.jsx)("div",{className:"users-side",children:Object(b.jsx)(h,{})}),Object(b.jsx)("div",{className:"chat-box-holder",children:Object(b.jsx)(E,{})})]})}function M(){var e=Object(n.useContext)(m).userName;return Object(b.jsx)("div",{children:null==e?Object(b.jsx)(f,{}):Object(b.jsx)(T,{})})}var A=function(){return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)(O,{children:Object(b.jsx)(M,{})}),Object(b.jsx)("div",{className:"built-by",children:Object(b.jsx)("a",{href:"https://iemeka.github.io/",children:"created by Emeka"})})]})};a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.ec156a5a.chunk.js.map