(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{37:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){},89:function(e,t,s){},90:function(e,t,s){},91:function(e,t,s){},92:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),r=s(9),i=s.n(r),a=(s(46),s(47),s(21)),u=s(2),o=s(38),l=Object(o.io)("https://chatxapp.herokuapp.com/"),j=s.p+"static/media/kick.1d842c55.wav",d=s.p+"static/media/altImg.8d7f1054.jpg",b=s(0),m=c.a.createContext({connected:!1,setConnected:function(){},messages:[],setMessages:function(){},users:[],setUsers:function(){},sendMessage:function(){},userInit:function(){},userName:null,setUserName:function(){},userData:{},setUserData:function(){},typingStatus:!1,setTypingStatus:function(){}});function f(e){var t=e.children,s=Object(n.useState)(!1),c=Object(u.a)(s,2),r=c[0],i=c[1],o=Object(n.useState)([]),f=Object(u.a)(o,2),O=f[0],x=f[1],g=Object(n.useState)([]),h=Object(u.a)(g,2),p=h[0],v=h[1],N=Object(n.useState)(null),y=Object(u.a)(N,2),C=y[0],S=y[1],U=Object(n.useState)({}),k=Object(u.a)(U,2),w=k[0],R=k[1],I=Object(n.useState)(!1),D=Object(u.a)(I,2),T=D[0],M=D[1],E=Object(n.useCallback)((function(e){x([].concat(Object(a.a)(O),[{user:"me",type:"chat-message",message:e,imgUrl:w.imgUrl}])),l.emit("send-message",{user:C,message:e,type:"chat-message",imgUrl:w.imgUrl})}),[O,w.imgUrl,C]),A=Object(n.useCallback)((function(e,t){var s=""===t?d:t;S(e),R({name:e,imgUrl:s,id:l.id}),l.emit("user-init",{user:e,imgUrl:s,message:" is online",type:"online"})}),[]),F=Object(n.useCallback)((function(e){var t=e?"".concat(C," is Typing..."):"";l.emit("typing-user",{message:t,type:"typing"})}),[C]),J=Object(n.useCallback)((function(e,t){x([].concat(Object(a.a)(e),[t]))}),[]);Object(n.useEffect)((function(){return l.on("connect",(function(){i(!0)})),l.on("user-init",(function(e){J(O,e)})),l.on("user-exit",(function(e){e.message=" is offline",e.type="user-exit",J(O,e)})),l.on("send-message",(function(e){new Audio(j).play(),J(O,e)})),l.on("online-users",(function(e){v(e)})),l.on("typing-user",(function(e){M(e)})),function(){l.off("connect"),l.off("user-init"),l.off("send-message"),l.off("user-exit"),l.off("online-users"),l.off("typing-user")}}),[O,J]);var z=Object(n.useMemo)((function(){return{connected:r,messages:O,users:p,sendMessage:E,userName:C,setUserName:S,userInit:A,typingStatus:T,setTypingStatus:M,isTyping:F,userData:w}}),[r,O,p,E,C,A,T,F,w]);return Object(b.jsx)(m.Provider,{value:z,children:t})}s(80);var O=function(){var e=Object(n.useContext)(m).userInit,t=Object(n.useState)(""),s=Object(u.a)(t,2),c=s[0],r=s[1],i=Object(n.useState)(d),a=Object(u.a)(i,2),o=a[0],l=a[1];return Object(b.jsxs)("form",{className:"login-form",onSubmit:function(t){t.preventDefault(),c.trim().length>0&&e(c.trim(),o)},children:[Object(b.jsx)("img",{src:o,alt:""}),Object(b.jsx)("label",{className:"file-upload",for:"img",children:"select profile picture"}),Object(b.jsx)("input",{id:"img",type:"file",onChange:function(e){var t=e.target.files[0];if(null!=t){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){l(s.result)}}}}),Object(b.jsx)("input",{placeholder:"enter username",type:"text",onChange:function(e){r(e.target.value)}}),Object(b.jsx)("button",{children:"submit"})]})};s(81);function x(){var e=Object(n.useContext)(m).userData;return Object(b.jsxs)("div",{className:"cur-user-sect",children:[Object(b.jsx)("div",{className:"img-holder",children:Object(b.jsx)("img",{src:e.imgUrl,alt:""})}),Object(b.jsx)("div",{className:"cur-user-name",children:Object(b.jsx)("span",{children:e.name})})]})}s(82);function g(){var e=Object(n.useContext)(m),t=e.users,s=e.userData.id;return Object(b.jsx)("div",{className:"hold-other-users",children:Object.keys(t).map((function(e,n){return e!==s?Object(b.jsxs)("div",{className:"other-user",children:[Object(b.jsx)("img",{style:{width:"40px",height:"40px",borderRadius:"50%"},src:t[e].imgUrl,alt:""}),Object(b.jsx)("span",{children:t[e].name})]},n):null}))})}s(83);function h(){var e=Object(n.useContext)(m).users;return Object(b.jsxs)("div",{className:"user-container",children:[Object(b.jsx)("div",{className:"current-user",children:Object(b.jsx)(x,{})}),Object(b.jsx)("div",{className:"users-num",children:Object(b.jsxs)("span",{children:["Active users ",Object(b.jsx)("span",{id:"counter",children:Object.keys(e).length})]})}),Object(b.jsx)("div",{className:"other-users",children:Object(b.jsx)(g,{})})]})}s(84),s(85);var p=s(94);s(86),s(37);function v(e){Object(n.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth"})}))}function N(e){return{me:{backgroundColor:"#1c2439",color:"#fff",order:1},notme:{backgroundColor:"#fff",color:"#1c2439",order:null}}["me"===e?"me":"notme"]}function y(e){var t=e.user,s=e.message,c=e.imgUrl,r=Object(n.useState)(!1),i=Object(u.a)(r,2),a=i[0],o=i[1],l=Object(n.useRef)(null),j=N(t);return v(l),Object(n.useEffect)((function(){o(!0)}),[]),Object(b.jsx)(p.a,{nodeRef:l,in:a,timeout:500,unmountOnExit:!0,classNames:"last",children:Object(b.jsxs)("div",{ref:l,className:"old-msg",children:[Object(b.jsxs)("div",{className:"user",style:{order:j.order},children:[" ",Object(b.jsx)("img",{style:{width:"20px",height:"20px",borderRadius:"50%"},src:c,alt:""}),Object(b.jsx)("span",{children:t})," "]}),Object(b.jsx)("div",{className:"msg",children:Object(b.jsx)("span",{style:{backgroundColor:j.backgroundColor,color:j.color},className:"message",children:s})})]})})}function C(e){var t=e.user,s=e.message,n=e.imgUrl,c=N(t);return Object(b.jsxs)("div",{className:"old-msg",children:[Object(b.jsxs)("div",{className:"user",style:{order:c.order},children:[" ",Object(b.jsx)("img",{style:{width:"20px",height:"20px",borderRadius:"50%"},src:n,alt:""}),Object(b.jsx)("span",{children:t})," "]}),Object(b.jsx)("div",{className:"msg",children:Object(b.jsx)("span",{style:{backgroundColor:c.backgroundColor,color:c.color},className:"message",children:s})})]})}function S(e){var t=e.msg,s=e.ind,c=e.lastInd,r=t.user,i=t.message,a=t.imgUrl,u=Object(n.useRef)(null);return u.current="me"===r?"flex-end":"flex-start",Object(b.jsx)("div",{style:{border:"2px solid yellow",alignSelf:u.current},children:s+1===c?Object(b.jsx)(y,{user:r,message:i,imgUrl:a}):Object(b.jsx)(C,{user:r,message:i,imgUrl:a})})}s(89);function U(e){var t=e.msg,s=t.user,c=t.message,r=Object(n.useRef)(null);return v(r),Object(b.jsxs)("div",{ref:r,className:"notification",children:[Object(b.jsx)("span",{children:s}),Object(b.jsx)("span",{children:c})]})}function k(){var e=Object(n.useContext)(m).messages;return Object(b.jsx)("div",{className:"display-message",children:e.map((function(t,s){return Object(b.jsx)("div",{className:"msg-container",children:"chat-message"!==t.type?Object(b.jsx)(U,{msg:t}):Object(b.jsx)(S,{msg:t,ind:s,lastInd:e.length})},s)}))})}s(90);var w=s(39),R=s.n(w),I=s(40);function D(){var e=Object(n.useContext)(m),t=e.sendMessage,s=e.isTyping,c=e.typingStatus,r=Object(n.useState)(""),i=Object(u.a)(r,2),a=i[0],o=i[1],l=Object(n.useRef)(null),j=function(){s(!1)},d=Object(n.useRef)();return d.current=c,Object(b.jsx)("div",{className:"type-message",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(a),o(""),l.current.focus()},children:[Object(b.jsx)("div",{className:"hold-indicator",children:Object(b.jsx)("span",{className:"typing-indicator",children:d.current.message})}),Object(b.jsx)("div",{className:"hold-input-box",children:Object(b.jsxs)("div",{className:"input-background",children:[Object(b.jsx)("input",{placeholder:"enter your message here",className:"input-box",type:"text",value:a,onChange:function(e){o(e.target.value),clearTimeout(j),s(!0)},onKeyUp:function(){setTimeout(j,2e3)},ref:l,autoFocus:!0}),Object(b.jsxs)("button",{id:"submit-btn",children:["Send"," ",Object(b.jsx)(R.a,{className:"sendIcon",path:I.a,title:"Send",size:.6,color:"white"})]})]})})]})})}function T(){return Object(b.jsxs)("div",{className:"chat-box",children:[Object(b.jsx)(k,{}),Object(b.jsx)(D,{})]})}s(91);function M(){return Object(b.jsxs)("div",{className:"app-container",children:[Object(b.jsx)("div",{className:"users-side",children:Object(b.jsx)(h,{})}),Object(b.jsx)("div",{className:"chat-box-holder",children:Object(b.jsx)(T,{})})]})}function E(){var e=Object(n.useContext)(m).userName;return Object(b.jsx)("div",{children:null==e?Object(b.jsx)(O,{}):Object(b.jsx)(M,{})})}var A=function(){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(f,{children:Object(b.jsx)(E,{})})})};i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(A,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.f7e6c86c.chunk.js.map