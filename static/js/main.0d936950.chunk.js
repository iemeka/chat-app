(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{37:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){},86:function(e,t,s){},89:function(e,t,s){},90:function(e,t,s){},91:function(e,t,s){},92:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),i=s(9),a=s.n(i),r=(s(46),s(47),s(21)),u=s(2),l=s(38),j=Object(l.io)("https://chatxapp.herokuapp.com/"),o=s.p+"static/media/kick.1d842c55.wav",d=s.p+"static/media/altImg.8d7f1054.jpg",b=s(0),m=c.a.createContext({connected:!1,setConnected:function(){},messages:[],setMessages:function(){},users:[],setUsers:function(){},sendMessage:function(){},userInit:function(){},userName:null,setUserName:function(){},userData:{},setUserData:function(){},typingStatus:!1,setTypingStatus:function(){}});function O(e){var t=e.children,s=Object(n.useState)(!1),c=Object(u.a)(s,2),i=c[0],a=c[1],l=Object(n.useState)([]),O=Object(u.a)(l,2),f=O[0],x=O[1],g=Object(n.useState)([]),h=Object(u.a)(g,2),p=h[0],v=h[1],N=Object(n.useState)(null),y=Object(u.a)(N,2),S=y[0],U=y[1],C=Object(n.useState)({}),k=Object(u.a)(C,2),w=k[0],R=k[1],I=Object(n.useState)(!1),D=Object(u.a)(I,2),T=D[0],M=D[1],E=Object(n.useCallback)((function(e){x([].concat(Object(r.a)(f),[{user:"me",type:"chat-message",message:e,imgUrl:w.imgUrl}])),j.emit("send-message",{user:S,message:e,type:"chat-message",imgUrl:w.imgUrl})}),[f,w.imgUrl,S]),A=Object(n.useCallback)((function(e,t){var s=""===t?d:t;U(e),R({name:e,imgUrl:s,id:j.id}),j.emit("user-init",{user:e,imgUrl:s,message:" is online",type:"online"})}),[]),F=Object(n.useCallback)((function(e){var t=e?"".concat(S," is Typing..."):"";j.emit("typing-user",{message:t,type:"typing"})}),[S]),J=Object(n.useCallback)((function(e,t){x([].concat(Object(r.a)(e),[t]))}),[]);Object(n.useEffect)((function(){return j.on("connect",(function(){a(!0)})),j.on("user-init",(function(e){J(f,e)})),j.on("user-exit",(function(e){e.message=" is offline",e.type="user-exit",J(f,e)})),j.on("send-message",(function(e){new Audio(o).play(),J(f,e)})),j.on("online-users",(function(e){v(e)})),j.on("typing-user",(function(e){M(e)})),function(){j.off("connect"),j.off("user-init"),j.off("send-message"),j.off("user-exit"),j.off("online-users"),j.off("typing-user")}}),[f,J]);var z=Object(n.useMemo)((function(){return{connected:i,messages:f,users:p,sendMessage:E,userName:S,setUserName:U,userInit:A,typingStatus:T,setTypingStatus:M,isTyping:F,userData:w}}),[i,f,p,E,S,A,T,F,w]);return Object(b.jsx)(m.Provider,{value:z,children:t})}s(80);var f=function(){var e=Object(n.useContext)(m).userInit,t=Object(n.useState)(""),s=Object(u.a)(t,2),c=s[0],i=s[1],a=Object(n.useState)(d),r=Object(u.a)(a,2),l=r[0],j=r[1];return Object(b.jsxs)("form",{className:"login-form",onSubmit:function(t){t.preventDefault(),c.trim().length>0&&e(c.trim(),l)},children:[Object(b.jsx)("img",{src:l,alt:""}),Object(b.jsx)("label",{className:"file-upload",for:"img",children:"select profile picture"}),Object(b.jsx)("input",{id:"img",type:"file",onChange:function(e){var t=e.target.files[0];if(null!=t){var s=new FileReader;s.readAsDataURL(t),s.onload=function(){j(s.result)}}}}),Object(b.jsx)("input",{placeholder:"enter username",type:"text",onChange:function(e){i(e.target.value)}}),Object(b.jsx)("button",{children:"submit"})]})};s(81);function x(){var e=Object(n.useContext)(m).userData;return Object(b.jsxs)("div",{className:"cur-user-sect",children:[Object(b.jsx)("div",{className:"img-holder",children:Object(b.jsx)("img",{src:e.imgUrl,alt:""})}),Object(b.jsx)("div",{className:"cur-user-name",children:Object(b.jsx)("span",{children:e.name})})]})}s(82);function g(){var e=Object(n.useContext)(m),t=e.users,s=e.userData.id;return Object(b.jsx)("div",{className:"hold-other-users",children:Object.keys(t).map((function(e,n){return e!==s?Object(b.jsxs)("div",{className:"other-user",children:[Object(b.jsx)("img",{style:{width:"40px",height:"40px",borderRadius:"50%"},src:t[e].imgUrl,alt:""}),Object(b.jsx)("span",{children:t[e].name})]},n):null}))})}s(83);function h(){var e=Object(n.useContext)(m).users;return Object(b.jsxs)("div",{className:"user-container",children:[Object(b.jsx)("div",{className:"current-user",children:Object(b.jsx)(x,{})}),Object(b.jsx)("div",{className:"users-num",children:Object(b.jsxs)("span",{children:["Active users ",Object(b.jsx)("span",{id:"counter",children:Object.keys(e).length})]})}),Object(b.jsx)("div",{className:"other-users",children:Object(b.jsx)(g,{})})]})}s(84),s(85);var p=s(94);s(86),s(37);function v(e){Object(n.useEffect)((function(){e.current&&e.current.scrollIntoView({behavior:"smooth"})}))}function N(e){var t=e.user,s=e.message,c=e.imgUrl,i=Object(n.useState)(!1),a=Object(u.a)(i,2),r=a[0],l=a[1],j=Object(n.useRef)(null);return v(j),Object(n.useEffect)((function(){l(!0)}),[]),Object(b.jsx)(p.a,{nodeRef:j,in:r,timeout:500,unmountOnExit:!0,classNames:"last",children:Object(b.jsxs)("div",{ref:j,className:"old-msg",children:[Object(b.jsxs)("div",{className:"user",style:{order:"me"===t?1:null},children:[" ",Object(b.jsx)("img",{style:{width:"20px",height:"20px",borderRadius:"50%"},src:c,alt:""}),Object(b.jsx)("span",{children:t})," "]}),Object(b.jsx)("div",{className:"msg",children:Object(b.jsx)("span",{className:"message",children:s})})]})})}function y(e){var t=e.user,s=e.message,n=e.imgUrl;return Object(b.jsxs)("div",{className:"old-msg",children:[Object(b.jsxs)("div",{className:"user",style:{order:"me"===t?1:null},children:[" ",Object(b.jsx)("img",{style:{width:"20px",height:"20px",borderRadius:"50%"},src:n,alt:""}),Object(b.jsx)("span",{children:t})," "]}),Object(b.jsx)("div",{className:"msg",children:Object(b.jsx)("span",{className:"message",children:s})})]})}function S(e){var t=e.msg,s=e.ind,c=e.lastInd,i=t.user,a=t.message,r=t.imgUrl,u=Object(n.useRef)(null);return u.current="me"===i?"flex-end":"flex-start",Object(b.jsx)("div",{style:{border:"2px solid yellow",alignSelf:u.current},children:s+1===c?Object(b.jsx)(N,{user:i,message:a,imgUrl:r}):Object(b.jsx)(y,{user:i,message:a,imgUrl:r})})}s(89);function U(e){var t=e.msg,s=t.user,c=t.message,i=Object(n.useRef)(null);return v(i),Object(b.jsxs)("div",{ref:i,className:"notification",children:[Object(b.jsx)("span",{children:s}),Object(b.jsx)("span",{children:c})]})}function C(){var e=Object(n.useContext)(m).messages;return Object(b.jsx)("div",{className:"display-message",children:e.map((function(t,s){return Object(b.jsx)("div",{className:"msg-container",children:"chat-message"!==t.type?Object(b.jsx)(U,{msg:t}):Object(b.jsx)(S,{msg:t,ind:s,lastInd:e.length})},s)}))})}s(90);var k=s(39),w=s.n(k),R=s(40);function I(){var e=Object(n.useContext)(m),t=e.sendMessage,s=e.isTyping,c=e.typingStatus,i=Object(n.useState)(""),a=Object(u.a)(i,2),r=a[0],l=a[1],j=Object(n.useRef)(null),o=function(){s(!1)},d=Object(n.useRef)();return d.current=c,Object(b.jsx)("div",{className:"type-message",children:Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(r),l(""),j.current.focus()},children:[Object(b.jsx)("div",{className:"hold-indicator",children:Object(b.jsx)("span",{className:"typing-indicator",children:d.current.message})}),Object(b.jsx)("div",{className:"hold-input-box",children:Object(b.jsxs)("div",{className:"input-background",children:[Object(b.jsx)("input",{placeholder:"enter your message here",className:"input-box",type:"text",value:r,onChange:function(e){l(e.target.value),clearTimeout(o),s(!0)},onKeyUp:function(){setTimeout(o,2e3)},ref:j,autoFocus:!0}),Object(b.jsxs)("button",{id:"submit-btn",children:["Send"," ",Object(b.jsx)(w.a,{className:"sendIcon",path:R.a,title:"Send",size:.6,color:"white"})]})]})})]})})}function D(){return Object(b.jsxs)("div",{className:"chat-box",children:[Object(b.jsx)(C,{}),Object(b.jsx)(I,{})]})}s(91);function T(){return Object(b.jsxs)("div",{className:"app-container",children:[Object(b.jsx)("div",{className:"users-side",children:Object(b.jsx)(h,{})}),Object(b.jsx)("div",{className:"chat-box-holder",children:Object(b.jsx)(D,{})})]})}function M(){var e=Object(n.useContext)(m).userName;return Object(b.jsx)("div",{children:null==e?Object(b.jsx)(f,{}):Object(b.jsx)(T,{})})}var E=function(){return Object(b.jsx)("div",{className:"container",children:Object(b.jsx)(O,{children:Object(b.jsx)(M,{})})})};a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.0d936950.chunk.js.map